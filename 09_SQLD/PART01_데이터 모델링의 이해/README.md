# SQLD 1과목

## 제 1장 데이터 모델링의 이해

#### 1. 데이터 모델의 이해

1. 모델링
   - 다양한 현상을 추상화, 단순화하여 일정한 표기법에 의해 표현하는 것
   - 모델이란 현실 세계의 추상화 된 반영

2. 모델링 특징 (추단명)
   - 추상화 : 일정한 형식에 맞춰서 표현
   - 단순화 : 제한된 표기법이나 언어로 표현
   - 명확화 : 애매모호함을 제거하여 이해가 쉽게 표현
3. 모델링의 관점
   - 데이터 관점 : 업무와 데이터 및 데이터 사이의 관계를 모델링
   - 프로세스 관점 : 업무가 실제로 하고있는 일, 해야 하는 일 모델링
   - 데이터와 프로세스의 상관 관점 : 데이터에 대한 업무 처리 방식의 영향을 모델링

- 데이터 모델링의 중요성과 유의점
  1) 중요성 : 파급효과, 간결한 표현, 데이터 품질 유지
  2) 유의점
     1) 중복 : 여러 장소에 같은 정보 저장 X
     2) 비유연성 : 데이터의 정의를 데이터 사용 프로세스와 분리
     3) 비일관성 : 모델링할 때 데이터 간 상호 연관 관계 명확히 정의

4. 데이터 모델링의 3단계
   - 개념적 모델링(계획/분석) : ERD 도출, 업무중심, 포괄적인 수준의 모델링
   - 논리적 모델링(분석) : 테이블 도출, key/속성/관계를 표현, 재사용성, 정규화 수행
   - 물리적 모델링(설계) : DB 구축, 물리적 성격, 개념적보다 구체적
5. 데이터 독립성
   - 데이터의 구조가 변경되어도 응용 프로그램이 변경될 필요가 없음
   - **논리적 독립성 + 물리적 독립성**으로 실현됨
   - 필요성 : 데이터 중복성과 복잡도가 증가 -> 요구사항 대응 저하, 유지보수 비용 증가

- 데이터베이스 스키마

  - 데이터 모델링 대상(틀)
  - 데이터베이스 구조, 데이터 타입, 제약조건에 대한 명세
  - 데이터베이스 설계 단계에서 명시되며 자주 변경되지 않음

- 데이터베이스의 3단계 구조

  - 외부 스키마 : 응용프로그램 관점에서의 요구사항, 사용자 관점, DB 정의

  - 개념 스키마 : 외부 스키마가 필요로 하는 데이터를 모두 모아놓은 것. 설계자 관점

    (**DB에 저장되는 데이터와 사용자 관계 표현 -> 모든 사용자 관점 통합, 조직 전체 통합**)

  - 내부 스키마 : 데이터베이스가 물리적으로 저장된 형식, 개발자 관점

  -> 데이터 모델링은 통합 관점의 개념 스키마를 만들어 가는 과정

- 사상(Mapping)
  - 상호 독립적인 개념을 연결시켜주는 다리
  - 논리적 사상 : 외부화면 및 사용자 인터페이스 스키마 구조는 개념 스키마와 연결
  - 물리적 사상 : 개념 스키마 구조와 물리적 저장된 구조(테이블 스페이스)와 연결
- 논리적 독립성
  - 논리적 사상(외부적-개념적)을 통해 논리적 독립성 보장
  - 개념 스키마가 변경되어도 외부 스키마에는 영향 X
  - 논리적 구조가 변경되어도 응용 프로그램에는 영향 X, 통합 구조 변경 가능
- 물리적 독립성
  - 물리적 사상 (개념적-내부적)을 통해 물리적 독립성 보장
  - 내부 스키마가 변경되어도 외부/개념 스키마 영향 X
  - 응용프로그램과 개념 스키마에 영향 없이 저장장치 구조변경 가능, 물리적 구조

6. 데이터 모델링 3요소 (개체, 속성, 관계)
   - 업무가 관여하는 **개체** : 엔터티 타입, 엔터티 / 엔터티, 인스턴스, 어커런스
   - 개체가 가지는 **속성** : 속성 / 속성값
   - 개체가 가지는 **관계** : 관계 / 페어링
7. ERD (Entity Relationship Diagram)
   - 데이터 모델 표기법 : 엔터티를 사각형, 관계를 마름모, 속성을 타원형으로 표현
8. ERD 표기법을 이용하여 모델링 하는 방법
   1. 엔터티를 그린 후 적절하게 배치
   2. 엔터티 간 관계 설정
      - 식별자 관계(부모로부터 상속받은 FK가 자식의 PK의 일부가 되는 관계)를 우선 설정함
      - 가급적 Cycle 관계도 발생하지 않아야 한다.
   3. 관계명 기술 (양 방향)
      - 현재형 사용, 지나치게 포괄적인 단어는 지양
   4. 관계차수, 관계의 참여도, 선택성 표시
9. 좋은 모델링의 조건
   - 완전성 : 업무에서 필요로 하는 모든 데이터가 데이터 모델에 정의되어야 한다.
   - 중복배제 : 동일한 사실은 반드시 한번만 기록
   - 업무규칙 : 업무규칙이 데이터 모델에 표현되어야 한다
   - 데이터 재사용 : 회사 전체 관점에서 공통 데이터 도출, 전 영역 사용할 수 있도록 설계
   - 통합성 : 동일한 데이터는 조직의 전체에서 한 번만 정의되고 이를 참조/활용



#### 2. 엔터티

1. 엔터티
   - 업무에 필요한 정보를 저장하고 관리하기 위한 집합적인 것 (실체, 객체)
   - **엔터티는 인스턴스의 집합**
2. 엔터티의 분류

- 유무형에 따른 분류
  1. 유형 엔터티 : 물리적인 형태가 있고 안정적이며 지속적 활용 ex) 교수, 강의실, 학생
  2. 개념 엔터티 : 물리적인 형태는 존재하지 않으나 관리해야 할 개념적 정보 ex) 수업, 보험상품
  3. 사건 엔터티 : 업무 수행 과정에서 발생, 비교적 발생량 많음 ex) 수강신청, 주문
- 발생시점에 따른 분류
  1. 기본 엔터티 : 독립적으로 생성되는 엔터티
  2. 중심 엔터티 : 기본 엔터티와 행위 엔터티 중간에 존재하는 엔터티
  3. 행위 엔터티 : 2개 이상의 부모 엔터티로부터 발생, 비즈니스 프로세스를 실행하면서 생성되는 엔터티, 지속적 정보가 추가되고 변경되어 데이터양이 가장 많음

3. 엔터티의 특징
   - 업무에서 필요로 하는 정보 포함
   - 유일한 식별자를 가짐
   - 2개 이상의 인스턴스를 포함함
   - 업무 프로세스에 이용됨
   - 속성 없이 엔터티의 이름만 존재할 수 없음
   - 다른 엔터티와 최소 1개 이상의 관계가 존재
4. 엔터티의 명명
   - 엔터티 생성 의미대로, 실제 업무에서 사용하는 용어를 사용
   - 약어 사용 X, 단수명사 사용
   - 이름이 동일한 엔터티가 중복으로 존재 X



#### 3. 속성

1. 속성의 정의
   - 사물의 특징 또는 본질적인 성질
   - 인스턴스에 대해 의미상 더이상 분리되지 않는 **최소의 데이터 단위**
   - 엔터티에 속한 인스턴스들의 성격을 구체적으로 나타냄
   - 엔터티, 인스턴스, 속성, 속성값의 대응

- 엔터티, 인스턴스 속성의 관계
  - 1개의 엔터티 : 2개 이상의 인스턴스 집합을 가짐
  - 1개의 인스턴스 : 2개 이상의 속성을 가짐
  - 1개의 속성 : 1개의 속성값을 가짐

2. 속성의 특징
   - 해당 업무에서 필요하고 관리해야 하는 정보
   - 모든 속성은 정해진 주식별자에 함수적으로 종속되어야 함
   - 하나의 속성은 한 개의 값만을 가짐
3. 속성의 명명
   - 현업에서 사용하는 이름을 부여
   - 약어 사용은 가급적 X
   - 수식어/소유격 X, 서술식 속성명 X, 명사형 속성명 O
   - 전체 데이터 모델에서 유일성 확보
4. 속성의 도메인
   - 각 속성이 가질 수 있는 값의 범위 ex) 학점 : 0.0~4.5 사이의 실수
   - 엔터티 내에서 속성에 대한 데이터타입과 크기, 제약사항을 지정
5. 속성의 분류
   1. 특성에 따른 분류
      - 기본 속성 : 가장 일반적인 속성으로, 원래의 업무로부터 유래된 속성
      - 설계 속성 : 데이터 모델링을 위해 새로 만든 속성(코드, 일련번호)
      - 파생 속성 : 다른 속성들로부터 유도된 속성(통계, 계산된 값)
   2. 분해 가능 여부에 따른 분류
      - 단일 속성 : 하나의 의미
      - 복합 속성 : 여러 의미, 단일 속성으로 분해 가능
      - 단일값 속성 : 속성 한 개의 값
      - 다중값 속성 : 속성 한 개에 여러 값, 엔터티로 분해 가능
   3. 엔터티 구성 방식에 따른 분류
      - 기본키 속성(PK) : 엔터티의 인스턴스를 구별할 수 있는 속성
      - 외래키 속성(FK) : 타 엔터티의 PK를 참조하는 속성
      - 일반 속성 : 엔터티에 포함되고 PK나 FK 속성이 아닌 속성



#### 4. 관계

1. 관계와 페어링
   - 관계 : 엔터티의 인스턴스 사이의 논리적인 연관성으로써, 존재의 형태로서나 행위 서로에게 연관성이 부여된 상태
   - 페어링 : 엔터티 내 인스턴스간 개별적 관계 -> 이것의 집합을 관계로 표현
   - 인스턴스의 집합 -> 엔터티 페어링의 집합 -> 관계
2. 관계의 분류
   1. ERD : 존재에 의한 관계 / 행위에 의한 관계 (구분 없이 단일화된 표기법 사용)
   2. UML(Unified Modeling Language) : 연관 관계 / 의존 관계 (실선과 점선 표기법으로 구분)
3. 관계의 표기법
   1. 관계명 : 엔터티가 관계에 참여하는 형태, 각 관계는 2개의 관계명 및 관점을 가짐
   2. 관계차수 : 1:1, 1:M, M:M (관계 엔터티 이용)
   3. 관계 선택사양 : 필수참여, 선택참여



#### 5. 식별자

1. 식별자의 개념
   - 하나의 엔터티에 구성되어있는 여러 개 속성 중 엔터티를 대표할 수 있는 속성을 의미
   - 하나의 엔터티는 반드시 하나의 유일한 식별자가 존재
2. 식별자의 분류
   - 대표성
     - 주식별자 : 엔터티 내에서 각 인스턴스를 구분 가능, 타 엔터티와 참조관계를 연결 가능
     - 보조식별자 : 엔터티 내에서 각 인스턴스를 구분 가능, 대표성을 갖지 못해 참조관계 연결에 사용되지 않음
   - 목적
     - 내부식별자 : 자연스럽게 존재하는 식별자
     - 외부식별자 : 관계를 통해 유입되는 타 엔터티의 식별자, 주식별자 속성 또는 일반 속성으로 포함될 수 있음
   - 속성 수
     - 단일식별자 : 하나의 속성으로 구성된 식별자
     - 복합식별자 : 둘 이상의 속성으로 구성된 식별자
   - 본질
     - 본질식별자 : 업무에 의해 만들어지는 식별자
     - 인조식별자 : 원조식별자가 복잡한 구성을 가지고 있기 때문에 인위적으로 만든 식별자
3. 식별자의 특징(**유최불존**)
   - 유일성 : 주식별자에 의해 엔터티 내의 모든 인스턴스들을 유일하게 구분함
   - 최소성 : 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 함
   - 불변성 : 주식별자가 지정되면 그 식별자의 값은 변하지 않아야 함
   - 존재성 : 주식별자가 지정되면 반드시 데이터 값이 존재해야 함
4. 주식별자 도출 기준
   - 유일성을 갖는 속성 중 해당 업무에서 자주 이용되는 속성을 지정
   - 명칭, 내역 등과 같이 이름으로 기술되는 것들은 가능하면 주식별자로 지정하지 X
   - 복합식별자를 구성할 경우 너무 많은 속성이 포함되지 않아야 함
5. 식별자 관계와 비식별자 관계
   1. 식별자 관계(실선)
      - 자식이 부모의 기본키를 상속받아 기본키로 사용하는 경우
      - 강한 연결관계, 부모에 종속, Null X, 1:1 or 1:N 관계
      - 문제점 : 자식의 주식별자 속성이 지속적으로 증가할 수 있음 -> 복잡, 오류가능성
   2. 비식별자 관계(점선)
      - 부모로부터 속성을 받아 일반 속성으로 사용하는 경우 (약한 종속)
      - 문제점 : 부모까지 조인, 불필요 현상 발생 -> SQL 구문 길어져 성능 저하



## 제 2장 데이터 모델과 성능

#### 1. 성능 데이터 모델링의 개요

1. 성능 데이터 모델링 정의
   - 데이터베이스 성능을 고려하여 데이터 모델링을 수행하는 것
   - 정규화, 반정규화, 테이블 통합 및 분할, 조인 구조, PK/FK 설정 등
2. 수행 시점
   - 빠를수록 좋음
   - 분석/설계 단계에서 성능 모델링 수행 best -> 재업무 비용 최소화
3. 성능 데이터 모델링 고려사항
   - 정규화를 정확하게 수행 : 주요 관심사별로 테이블을 분산시킴
   - 데이터베이스 용량산정 수행 : 각 엔터티에 어느 정도의 트랜잭션이 들어오는지 파악
   - 데이터베이스에 발생되는 트랜잭션의 유형 파악 : CRUD 매트릭스 활용
   - 용량과 트랜잭션의 유형에 따라 반정규화 수행 : 테이블, 속성, 관계 변경
   - 이력모델의 조정, 인덱스를 고려한 PK/FK의 순서 조정, 슈퍼/서브타입 조정 등 수행
   - 성능관점에서 데이터 모델 검증



#### 2. 정규화와 성능

1. 정규화(Normalization)
   - 정의 : 데이터 분해 과정, 이상현상 제거
   - 목적 : 삽입/삭제/갱신 이상현상 방지
   - **함수적 종속성에 기반한 정규화 수행 필요**
2. **함수적 종속성(FD, Functional Dependency)**
   - 데이터들이 어떤







































